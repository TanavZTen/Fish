<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Literature Pro - 247 Poker Style</title>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <style>
    :root { --wood: #3d2b1f; --felt: #065f46; --gold: #fbbf24; }
    body { background-color: #052e16; font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; overflow: hidden; color: white; }
    
    /* Table Styling */
    .poker-arena {
      position: relative; width: 1000px; height: 600px;
      background: radial-gradient(circle, #067a5c 0%, #065f46 60%, #022c22 100%);
      border: 16px solid var(--wood); border-radius: 300px;
      box-shadow: inset 0 0 100px rgba(0,0,0,0.7), 0 25px 50px rgba(0,0,0,0.5);
    }
    .table-rail {
      position: absolute; inset: -20px; border: 4px solid #2d1a12;
      border-radius: 320px; pointer-events: none;
    }

    /* Seat Positioning */
    .seat { position: absolute; transform: translate(-50%, -50%); width: 140px; z-index: 20; transition: all 0.5s ease; }
    .player-card {
      background: rgba(0,0,0,0.8); backdrop-filter: blur(8px);
      border: 2px solid rgba(255,255,255,0.1); border-radius: 16px;
      padding: 10px; text-align: center;
    }
    .player-card.active { border-color: var(--gold); box-shadow: 0 0 15px var(--gold); }
    .player-card.is-me { border-color: #3b82f6; }

    /* Cards */
    .card-sprite {
      width: 42px; height: 60px; background: white; border-radius: 4px;
      color: black; font-weight: bold; display: flex; align-items: center;
      justify-content: center; font-size: 14px; box-shadow: 2px 2px 5px rgba(0,0,0,0.3);
      border: 1px solid #ddd;
    }
    .red-suit { color: #e11d48; }

    /* Custom Scrollbar */
    ::-webkit-scrollbar { width: 6px; }
    ::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.2); border-radius: 10px; }
    
    .modal-overlay { background: rgba(0,0,0,0.85); backdrop-filter: blur(10px); }
    .btn-wood { background: linear-gradient(to bottom, #5d4037, #3e2723); border: 1px solid #2d1a12; }
  </style>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { useState, useEffect, useMemo, useCallback, useRef } = React;

    /* ============================================================
       CONSTANTS & CONFIG
       ============================================================ */
    const SUPABASE_URL = 'https://vngdiukjrfmzwlbefmjf.supabase.co';
    const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZuZ2RpdWtqcmZtendsYmVmbWpmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc0Njk5MDUsImV4cCI6MjA4MzA0NTkwNX0.XBr7aEzSPj-Iw0HYf27T8yXo1nbZ01MhBVa-VIdNZG4';
    const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

    const SETS = [
      { name: 'Spades Low', cards: ['2♠','3♠','4♠','5♠','6♠','7♠'] },
      { name: 'Spades High', cards: ['9♠','10♠','J♠','Q♠','K♠','A♠'] },
      { name: 'Hearts Low', cards: ['2♥','3♥','4♥','5♥','6♥','7♥'] },
      { name: 'Hearts High', cards: ['9♥','10♥','J♥','Q♥','K♥','A♥'] },
      { name: 'Clubs Low', cards: ['2♣','3♣','4♣','5♣','6♣','7♣'] },
      { name: 'Clubs High', cards: ['9♣','10♣','J♣','Q♣','K♣','A♣'] },
      { name: 'Diamonds Low', cards: ['2♦','3♦','4♦','5♦','6♦','7♦'] },
      { name: 'Diamonds High', cards: ['9♦','10♦','J♦','Q♦','K♦','A♦'] },
      { name: '8s & Jokers', cards: ['8♥','8♦','8♠','8♣','RJ','BJ'] }
    ];

    const generateId = () => {
      let id = localStorage.getItem('lit_v3_id');
      if (!id) { id = 'user-' + Math.random().toString(36).substr(2, 9); localStorage.setItem('lit_v3_id', id); }
      return id;
    };

    /* ============================================================
       MAIN COMPONENT
       ============================================================ */
    const App = () => {
      const myId = useMemo(() => generateId(), []);
      const [view, setView] = useState('home'); 
      const [roomCode, setRoomCode] = useState('');
      const [playerName, setPlayerName] = useState('');
      const [gameData, setGameData] = useState(null);
      const [error, setError] = useState('');
      const [isSpectator, setIsSpectator] = useState(false);
      
      // UI / Interaction
      const [showCallModal, setShowCallModal] = useState(false);
      const [callSetIdx, setCallSetIdx] = useState(0);
      const [callMap, setCallMap] = useState({});
      const [askTarget, setAskTarget] = useState('');
      const [askCard, setAskCard] = useState('');

      /* --- DATABASE SYNC --- */
      const pushUpdate = async (updated) => {
        if (!roomCode) return;
        try {
          const { error: upsertErr } = await supabase.from('games').upsert({
            room_code: roomCode,
            game_data: updated,
            updated_at: new Date().toISOString()
          });
          if (upsertErr) throw upsertErr;
          setGameData(updated);
        } catch (e) {
          console.error("Sync Failure:", e);
          setError("Connection sync failed. Action may not have saved.");
        }
      };

      const fetchState = useCallback(async () => {
        if (!roomCode) return;
        const { data } = await supabase.from('games').select('game_data').eq('room_code', roomCode).single();
        if (data && data.game_data) {
          const remote = data.game_data;
          setGameData(remote);
          
          // Check if I should be a spectator
          if (remote.phase === 'game' && !remote.players.find(p => p.id === myId)) {
            setIsSpectator(true);
          }

          if (remote.phase === 'game' && view !== 'game') setView('game');
          if (remote.phase === 'lobby' && view !== 'lobby') setView('lobby');
        }
      }, [roomCode, view, myId]);

      useEffect(() => {
        const interval = setInterval(fetchState, 3000);
        return () => clearInterval(interval);
      }, [fetchState]);

      /* --- ROOM ACTIONS --- */
      const handleCreate = async () => {
        if (!playerName) return setError("Name is required");
        const code = Math.random().toString(36).substring(2, 8).toUpperCase();
        const initial = {
          hostId: myId, phase: 'lobby',
          players: [{ id: myId, name: playerName, hand: [], isBot: false }],
          teams: { team1: [myId], team2: [] },
          scores: { team1: 0, team2: 0 },
          gameLog: ["Room created by " + playerName],
          claimedSets: [], currentTurn: '',
          settings: { showAskHistory: true, askHistoryCount: 23, showCardCounts: true, turnTime: 'No Limit' }
        };
        setRoomCode(code);
        await pushUpdate(initial);
        setView('lobby');
      };

      const handleJoin = async () => {
        if (!playerName || !roomCode) return setError("Missing name or code");
        const { data } = await supabase.from('games').select('game_data').eq('room_code', roomCode).single();
        if (!data) return setError("Room not found");

        const updated = { ...data.game_data };
        if (!updated.players.find(p => p.id === myId)) {
          // Join as spectator if game is active
          if (updated.phase === 'game') {
            setIsSpectator(true);
            setView('game');
            setGameData(updated);
            return;
          }
          // Join as player in lobby
          updated.players.push({ id: myId, name: playerName, hand: [], isBot: false });
          if (updated.teams.team1.length <= updated.teams.team2.length) updated.teams.team1.push(myId);
          else updated.teams.team2.push(myId);
        }
        await pushUpdate(updated);
        setView('lobby');
      };

      const addBot = async (team) => {
        if (gameData.hostId !== myId) return; // Verify host
        const updated = JSON.parse(JSON.stringify(gameData));
        const botId = `bot-${Date.now()}`;
        updated.players.push({ id: botId, name: `Bot ${updated.players.length}`, hand: [], isBot: true });
        updated.teams[team].push(botId);
        await pushUpdate(updated);
      };

      const toggleSetting = (key) => {
        if (gameData.hostId !== myId) return;
        const updated = { ...gameData };
        if (key === 'showAskHistory') updated.settings.showAskHistory = !updated.settings.showAskHistory;
        if (key === 'showCardCounts') updated.settings.showCardCounts = !updated.settings.showCardCounts;
        pushUpdate(updated);
      };

      const handleStart = async () => {
        if (gameData.players.length < 2) return setError("Need more players");
        const updated = JSON.parse(JSON.stringify(gameData));
        let deck = []; SETS.forEach(s => deck.push(...s.cards));
        deck.sort(() => Math.random() - 0.5);
        
        updated.players.forEach((p, i) => {
          p.hand = deck.filter((_, idx) => idx % updated.players.length === i);
        });
        
        updated.phase = 'game';
        updated.currentTurn = myId;
        updated.gameLog.unshift("Game Started!");
        await pushUpdate(updated);
        setView('game');
      };

      const handleLeave = async () => {
        const updated = JSON.parse(JSON.stringify(gameData));
        if (updated.phase === 'game' && !isSpectator) {
          const me = updated.players.find(p => p.id === myId);
          me.isBot = true;
          me.name += " (Bot)";
          updated.gameLog.unshift(`${playerName} left. Replaced by Bot.`);
        } else {
          updated.players = updated.players.filter(p => p.id !== myId);
          updated.teams.team1 = updated.teams.team1.filter(id => id !== myId);
          updated.teams.team2 = updated.teams.team2.filter(id => id !== myId);
          if (updated.hostId === myId && updated.players.length > 0) updated.hostId = updated.players[0].id;
        }
        await pushUpdate(updated);
        setView('home');
        setRoomCode('');
      };

      const resetGame = async () => {
        if (gameData.hostId !== myId) return;
        const updated = JSON.parse(JSON.stringify(gameData));
        updated.phase = 'lobby';
        updated.scores = { team1: 0, team2: 0 };
        updated.claimedSets = [];
        updated.gameLog = ["New Game Initiated"];
        updated.players.forEach(p => p.hand = []);
        await pushUpdate(updated);
        setView('lobby');
      };

      const handleAsk = async () => {
        if (!askTarget || !askCard) return;
        const updated = JSON.parse(JSON.stringify(gameData));
        const target = updated.players.find(p => p.id === askTarget);
        const me = updated.players.find(p => p.id === myId);

        if (target.hand.includes(askCard)) {
          target.hand = target.hand.filter(c => c !== askCard);
          me.hand.push(askCard);
          updated.gameLog.unshift(`${me.name} took ${askCard} from ${target.name}`);
        } else {
          updated.currentTurn = target.id;
          updated.gameLog.unshift(`${me.name} failed to get ${askCard}. Turn: ${target.name}`);
        }
        setAskCard('');
        await pushUpdate(updated);
      };

      const handleCall = async () => {
        const updated = JSON.parse(JSON.stringify(gameData));
        const set = SETS[callSetIdx];
        let correct = true;

        set.cards.forEach(c => {
          const owner = updated.players.find(p => p.hand.includes(c));
          if (!owner || owner.id !== callMap[c]) correct = false;
        });

        const myTeam = updated.teams.team1.includes(myId) ? 'team1' : 'team2';
        const oppTeam = myTeam === 'team1' ? 'team2' : 'team1';

        if (correct) {
          updated.scores[myTeam]++;
          updated.gameLog.unshift(`CORRECT! Team ${myTeam} gets ${set.name}`);
        } else {
          updated.scores[oppTeam]++;
          updated.gameLog.unshift(`WRONG! Team ${oppTeam} awarded ${set.name}`);
        }

        updated.claimedSets.push(set.name);
        set.cards.forEach(c => updated.players.forEach(p => p.hand = p.hand.filter(hc => hc !== c)));
        setShowCallModal(false);
        await pushUpdate(updated);
      };

      useEffect(() => {
        if (showCallModal && gameData) {
          const me = gameData.players.find(p => p.id === myId);
          const setCards = SETS[callSetIdx].cards;
          let m = {};
          setCards.forEach(c => { if(me.hand.includes(c)) m[c] = myId; });
          setCallMap(m);
        }
      }, [showCallModal, callSetIdx]);

      /* --- SUB-COMPONENTS --- */
      const Home = () => (
        <div className="flex flex-col items-center justify-center min-h-screen">
          <div className="bg-emerald-900/60 p-10 rounded-3xl border border-white/10 shadow-2xl w-96">
            <h1 className="text-4xl font-black text-center mb-1 text-gold">LITERATURE</h1>
            <p className="text-center text-xs opacity-40 mb-8 uppercase tracking-widest">247 Professional Edition</p>
            {error && <p className="text-red-400 text-xs mb-4 text-center">{error}</p>}
            <input className="w-full p-4 rounded-xl bg-black/40 border border-white/10 mb-4" placeholder="Your Name" value={playerName} onChange={e => setPlayerName(e.target.value)} />
            <button onClick={handleCreate} className="w-full bg-yellow-600 text-black font-black py-4 rounded-xl mb-4 hover:bg-yellow-500 transition-all">CREATE TABLE</button>
            <div className="flex items-center gap-2 mb-4"><div className="h-px bg-white/10 flex-1"></div><span className="text-xs opacity-30">OR</span><div className="h-px bg-white/10 flex-1"></div></div>
            <input className="w-full p-4 rounded-xl bg-black/40 border border-white/10 mb-2 uppercase text-center font-mono" placeholder="6-CHAR CODE" value={roomCode} onChange={e => setRoomCode(e.target.value.toUpperCase())} />
            <button onClick={handleJoin} className="w-full bg-blue-600 font-black py-4 rounded-xl">JOIN TABLE</button>
          </div>
        </div>
      );

      const Lobby = () => {
        const isHost = gameData.hostId === myId;
        return (
          <div className="flex flex-col items-center justify-center min-h-screen p-6">
            <div className="bg-white/5 backdrop-blur-md p-10 rounded-[40px] border border-white/10 w-full max-w-4xl shadow-2xl">
              <div className="flex justify-between items-start mb-10">
                <div>
                  <h2 className="text-xs uppercase tracking-widest opacity-40">Table Code</h2>
                  <h1 className="text-6xl font-black text-yellow-500 font-mono">{roomCode}</h1>
                </div>
                <div className="text-right">
                  <h3 className="text-xs font-bold text-blue-400 uppercase mb-2">Room Settings</h3>
                  <div className="flex flex-col gap-2">
                    <button onClick={() => toggleSetting('showAskHistory')} className={`text-[10px] px-3 py-1 rounded-full border ${gameData.settings.showAskHistory ? 'bg-blue-500/20 border-blue-500' : 'opacity-40 border-white'}`}>Show Ask History: {gameData.settings.showAskHistory ? 'ON' : 'OFF'}</button>
                    <button onClick={() => toggleSetting('showCardCounts')} className={`text-[10px] px-3 py-1 rounded-full border ${gameData.settings.showCardCounts ? 'bg-blue-500/20 border-blue-500' : 'opacity-40 border-white'}`}>Show Card Counts: {gameData.settings.showCardCounts ? 'ON' : 'OFF'}</button>
                  </div>
                </div>
              </div>

              <div className="grid grid-cols-2 gap-10 mb-10">
                <div className="bg-blue-900/20 p-6 rounded-3xl border border-blue-500/20">
                  <h4 className="font-black text-blue-400 mb-4 flex justify-between">TEAM 1 <span>{gameData.teams.team1.length}</span></h4>
                  <div className="space-y-2">
                    {gameData.teams.team1.map(id => (
                      <div key={id} className="bg-black/20 p-3 rounded-xl flex justify-between items-center">
                        <span className="font-bold">{gameData.players.find(p => p.id === id)?.name}</span>
                        {gameData.hostId === id && <span className="text-[10px] bg-yellow-500 text-black px-2 py-0.5 rounded font-black">HOST</span>}
                      </div>
                    ))}
                    {isHost && <button onClick={() => addBot('team1')} className="w-full border-2 border-dashed border-white/10 py-2 rounded-xl text-xs opacity-40 hover:opacity-100">+ Add Bot</button>}
                  </div>
                </div>
                <div className="bg-red-900/20 p-6 rounded-3xl border border-red-500/20">
                  <h4 className="font-black text-red-400 mb-4 flex justify-between">TEAM 2 <span>{gameData.teams.team2.length}</span></h4>
                  <div className="space-y-2">
                    {gameData.teams.team2.map(id => (
                      <div key={id} className="bg-black/20 p-3 rounded-xl flex justify-between items-center">
                        <span className="font-bold">{gameData.players.find(p => p.id === id)?.name}</span>
                        {gameData.hostId === id && <span className="text-[10px] bg-yellow-500 text-black px-2 py-0.5 rounded font-black">HOST</span>}
                      </div>
                    ))}
                    {isHost && <button onClick={() => addBot('team2')} className="w-full border-2 border-dashed border-white/10 py-2 rounded-xl text-xs opacity-40 hover:opacity-100">+ Add Bot</button>}
                  </div>
                </div>
              </div>

              <div className="flex gap-4">
                {isHost && <button onClick={handleStart} className="flex-1 bg-emerald-500 text-black font-black py-5 rounded-2xl text-xl shadow-lg">START GAME</button>}
                <button onClick={handleLeave} className="px-10 bg-white/5 border border-white/10 py-5 rounded-2xl font-bold opacity-60 hover:opacity-100">LEAVE</button>
              </div>
            </div>
          </div>
        );
      };

      if (view === 'home') return <Home />;
      if (view === 'lobby') return <Lobby />;

      if (view === 'game' && gameData) {
        const me = gameData.players.find(p => p.id === myId) || { name: 'Spectator', hand: [] };
        const myTeamKey = gameData.teams.team1.includes(myId) ? 'team1' : 'team2';
        const isTurn = gameData.currentTurn === myId;

        return (
          <div className="min-h-screen flex items-center justify-center p-10 select-none">
            <div className="poker-arena">
              <div className="table-rail"></div>
              
              {/* Scores & Info */}
              <div className="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-center">
                <div className="flex gap-16 items-center">
                  <div className="text-center">
                    <div className="text-6xl font-black text-blue-500/80">{gameData.scores.team1}</div>
                    <div className="text-[10px] font-black uppercase tracking-widest opacity-50">Team 1</div>
                  </div>
                  <div className="text-white/5 text-9xl font-black italic select-none">LIT</div>
                  <div className="text-center">
                    <div className="text-6xl font-black text-red-500/80">{gameData.scores.team2}</div>
                    <div className="text-[10px] font-black uppercase tracking-widest opacity-50">Team 2</div>
                  </div>
                </div>
                {gameData.claimedSets.length === 9 && (
                  <div className="mt-8">
                    <div className="text-yellow-400 font-black mb-2">GAME OVER</div>
                    {gameData.hostId === myId && (
                      <button onClick={resetGame} className="bg-yellow-600 text-black px-6 py-2 rounded-full font-black text-sm">REMATCH</button>
                    )}
                  </div>
                )}
              </div>

              {/* Player Positions */}
              {gameData.players.map((p, idx) => {
                const angle = (idx / gameData.players.length) * 2 * Math.PI;
                const x = 50 + Math.cos(angle) * 44;
                const y = 50 + Math.sin(angle) * 40;
                const active = gameData.currentTurn === p.id;
                
                return (
                  <div key={p.id} className="seat" style={{ left: `${x}%`, top: `${y}%` }}>
                    <div className={`player-card ${active ? 'active' : ''} ${p.id === myId ? 'is-me' : ''}`}>
                      <div className="text-[10px] font-black opacity-60 uppercase truncate">{p.name}</div>
                      <div className="text-sm font-bold">{p.hand.length} <span className="text-[10px] opacity-50">Cards</span></div>
                    </div>
                  </div>
                );
              })}
            </div>

            {/* Bottom Controls */}
            <div className="fixed bottom-0 inset-x-0 p-8 flex justify-between items-end">
              <div className="w-64 bg-black/80 p-4 rounded-3xl border border-white/10 h-48 overflow-y-auto">
                <div className="text-[10px] font-black text-gold mb-3 uppercase">Activity Log</div>
                {gameData.gameLog.map((log, i) => <div key={i} className={`text-[11px] mb-2 ${i === 0 ? 'text-white' : 'opacity-40'}`}>• {log}</div>)}
              </div>

              <div className="flex flex-col items-center gap-6">
                <div className="flex gap-1">
                  {me.hand.sort().map(c => (
                    <div key={c} className={`card-sprite ${c.includes('♥') || c.includes('♦') || c === 'RJ' ? 'red-suit' : ''}`}>
                      {c}
                    </div>
                  ))}
                </div>

                {!isSpectator && isTurn && (
                  <div className="bg-white p-3 rounded-2xl flex gap-3 shadow-2xl">
                    <select className="bg-gray-100 p-2 rounded-xl text-black font-bold text-sm" value={askTarget} onChange={e => setAskTarget(e.target.value)}>
                      <option value="">Ask Opponent...</option>
                      {gameData.players.filter(p => !gameData.teams[myTeamKey].includes(p.id)).map(p => <option key={p.id} value={p.id}>{p.name}</option>)}
                    </select>
                    <select className="bg-gray-100 p-2 rounded-xl text-black font-bold text-sm w-32" value={askCard} onChange={e => setAskCard(e.target.value)}>
                      <option value="">Card...</option>
                      {SETS.filter(s => s.cards.some(c => me.hand.includes(c))).flatMap(s => s.cards).filter(c => !me.hand.includes(c)).map(c => <option key={c} value={c}>{c}</option>)}
                    </select>
                    <button onClick={handleAsk} disabled={!askTarget || !askCard} className="bg-blue-600 px-6 rounded-xl font-black disabled:opacity-30">ASK</button>
                    <button onClick={() => setShowCallModal(true)} className="bg-yellow-600 text-black px-6 rounded-xl font-black">CALL</button>
                  </div>
                )}
                {isSpectator && <div className="bg-black/60 px-6 py-2 rounded-full text-xs font-black border border-white/20">SPECTATOR MODE</div>}
              </div>

              <button onClick={handleLeave} className="bg-red-600/20 hover:bg-red-600 border border-red-500 p-4 rounded-full transition-all">
                 <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"/></svg>
              </button>
            </div>

            {/* CALL MODAL */}
            {showCallModal && (
              <div className="fixed inset-0 modal-overlay flex items-center justify-center p-6 z-[100]">
                <div className="bg-[#1a1a1a] p-10 rounded-[40px] border border-white/10 w-full max-w-xl shadow-[0_0_100px_rgba(0,0,0,1)]">
                  <h2 className="text-3xl font-black mb-1 italic text-gold">CALLING A SET</h2>
                  <p className="text-xs opacity-40 mb-6 uppercase tracking-widest">Assign every card in the set to your team</p>
                  
                  <select className="w-full bg-black p-4 rounded-2xl border border-white/10 mb-6 font-bold" value={callSetIdx} onChange={e => setCallSetIdx(Number(e.target.value))}>
                    {SETS.map((s, i) => !gameData.claimedSets.includes(s.name) && <option key={i} value={i}>{s.name}</option>)}
                  </select>
                  
                  <div className="space-y-3 mb-8 max-h-[300px] overflow-y-auto pr-2">
                    {SETS[callSetIdx].cards.map(card => {
                      const isMine = me.hand.includes(card);
                      return (
                        <div key={card} className="flex items-center gap-4 bg-white/5 p-3 rounded-xl">
                          <span className={`w-10 font-black text-xl ${card.includes('♥') || card.includes('♦') ? 'text-red-500' : ''}`}>{card}</span>
                          {isMine ? (
                            <div className="flex-1 text-emerald-400 text-xs font-black uppercase px-4 py-2 bg-emerald-400/10 rounded-lg">Held by You</div>
                          ) : (
                            <select className="flex-1 bg-white p-2 rounded-lg text-black font-bold text-sm" value={callMap[card] || ''} onChange={e => setCallMap({...callMap, [card]: e.target.value})}>
                              <option value="">Choose Teammate...</option>
                              {gameData.players.filter(p => gameData.teams[myTeamKey].includes(p.id) && p.id !== myId).map(p => (
                                <option key={p.id} value={p.id}>{p.name}</option>
                              ))}
                            </select>
                          )}
                        </div>
                      );
                    })}
                  </div>

                  <div className="flex gap-4">
                    <button onClick={handleCall} className="flex-1 bg-yellow-500 text-black py-4 rounded-2xl font-black text-lg">SUBMIT CLAIM</button>
                    <button onClick={() => setShowCallModal(false)} className="px-8 bg-white/5 py-4 rounded-2xl font-bold">CANCEL</button>
                  </div>
                </div>
              </div>
            )}
          </div>
        );
      }
      return null;
    };

    ReactDOM.render(<App />, document.getElementById('root'));
  </script>
</body>
</html>
