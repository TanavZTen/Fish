<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Literature Card Game</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useEffect } = React;

        // Icon components
        const Trophy = () => <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/><path d="M4 22h16"/><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/></svg>;
        
        const Book = () => <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20"/></svg>;

        const SETS = [
          { name: 'Spades 2-7', cards: ['2‚ô†', '3‚ô†', '4‚ô†', '5‚ô†', '6‚ô†', '7‚ô†'] },
          { name: 'Spades 9-A', cards: ['9‚ô†', '10‚ô†', 'J‚ô†', 'Q‚ô†', 'K‚ô†', 'A‚ô†'] },
          { name: 'Hearts 2-7', cards: ['2‚ô•', '3‚ô•', '4‚ô•', '5‚ô•', '6‚ô•', '7‚ô•'] },
          { name: 'Hearts 9-A', cards: ['9‚ô•', '10‚ô•', 'J‚ô•', 'Q‚ô•', 'K‚ô•', 'A‚ô•'] },
          { name: 'Clubs 2-7', cards: ['2‚ô£', '3‚ô£', '4‚ô£', '5‚ô£', '6‚ô£', '7‚ô£'] },
          { name: 'Clubs 9-A', cards: ['9‚ô£', '10‚ô£', 'J‚ô£', 'Q‚ô£', 'K‚ô£', 'A‚ô£'] },
          { name: 'Diamonds 2-7', cards: ['2‚ô¶', '3‚ô¶', '4‚ô¶', '5‚ô¶', '6‚ô¶', '7‚ô¶'] },
          { name: 'Diamonds 9-A', cards: ['9‚ô¶', '10‚ô¶', 'J‚ô¶', 'Q‚ô¶', 'K‚ô¶', 'A‚ô¶'] },
          { name: 'Eights + Jokers', cards: ['8‚ô•', '8‚ô¶', '8‚ô†', '8‚ô£', 'RJ', 'BJ'] }
        ];

        const App = () => {
          const [view, setView] = useState('home');
          const [gameState, setGameState] = useState('lobby');
          const [roomCode, setRoomCode] = useState('');
          const [playerName, setPlayerName] = useState('');
          const [players, setPlayers] = useState([]);
          const [myHand, setMyHand] = useState([]);
          const [myId, setMyId] = useState('');
          const [currentTurn, setCurrentTurn] = useState('');
          const [selectedOpponent, setSelectedOpponent] = useState('');
          const [selectedCard, setSelectedCard] = useState('');
          const [gameLog, setGameLog] = useState([]);
          const [teams, setTeams] = useState({ team1: [], team2: [] });
          const [scores, setScores] = useState({ team1: 0, team2: 0 });
          const [showCallModal, setShowCallModal] = useState(false);
          const [callSetIndex, setCallSetIndex] = useState(0);
          const [callCards, setCallCards] = useState({});
          const [copied, setCopied] = useState(false);
          const [selectedTeam, setSelectedTeam] = useState('');
          const [showTeamSelect, setShowTeamSelect] = useState(false);

          useEffect(() => {
            const interval = setInterval(() => {
              if (roomCode && gameState !== 'lobby') {
                loadGame();
              }
            }, 2000);
            return () => clearInterval(interval);
          }, [roomCode, gameState]);

          const loadGame = () => {
            if (!roomCode) return;
            try {
              const game = localStorage.getItem(`game:${roomCode}`);
              if (game) {
                const data = JSON.parse(game);
                setPlayers(data.players || []);
                setCurrentTurn(data.currentTurn || '');
                setGameLog(data.gameLog || []);
                setTeams(data.teams || { team1: [], team2: [] });
                setScores(data.scores || { team1: 0, team2: 0 });
                if (data.started) setGameState('playing');
                const me = data.players.find(p => p.id === myId);
                if (me) setMyHand(me.hand || []);
              }
            } catch (e) {
              console.log('Error:', e);
            }
          };

          const createRoom = () => {
            const code = Math.random().toString(36).substring(2, 8).toUpperCase();
            setRoomCode(code);
            setMyId(Date.now().toString());
            setShowTeamSelect(true);
          };

          const confirmTeamAndCreate = () => {
            if (!selectedTeam) return alert('Please select a team!');
            const initialGame = {
              players: [{ id: myId, name: playerName, hand: [] }],
              currentTurn: '',
              gameLog: [],
              teams: { 
                team1: selectedTeam === 'team1' ? [myId] : [], 
                team2: selectedTeam === 'team2' ? [myId] : [] 
              },
              scores: { team1: 0, team2: 0 },
              started: false
            };
            localStorage.setItem(`game:${roomCode}`, JSON.stringify(initialGame));
            setGameState('waiting');
            loadGame();
          };

          const joinRoom = () => {
            const game = localStorage.getItem(`game:${roomCode}`);
            if (!game) return alert('Room not found!');
            setMyId(Date.now().toString());
            setShowTeamSelect(true);
          };

          const confirmTeamAndJoin = () => {
            if (!selectedTeam) return alert('Please select a team!');
            try {
              const game = localStorage.getItem(`game:${roomCode}`);
              const data = JSON.parse(game);
              if (data.started) return alert('Game already started!');
              data.players.push({ id: myId, name: playerName, hand: [] });
              if (selectedTeam === 'team1') {
                data.teams.team1.push(myId);
              } else {
                data.teams.team2.push(myId);
              }
              localStorage.setItem(`game:${roomCode}`, JSON.stringify(data));
              setGameState('waiting');
              setShowTeamSelect(false);
              loadGame();
            } catch (e) {
              alert('Error joining room');
            }
          };

          const startGame = () => {
            if (players.length < 4) return alert('Need at least 4 players!');
            if (teams.team1.length === 0 || teams.team2.length === 0) return alert('Both teams need players!');
            
            const deck = [];
            SETS.forEach(set => deck.push(...set.cards));
            for (let i = deck.length - 1; i > 0; i--) {
              const j = Math.floor(Math.random() * (i + 1));
              [deck[i], deck[j]] = [deck[j], deck[i]];
            }
            
            const cardsPerPlayer = Math.floor(deck.length / players.length);
            const updatedPlayers = players.map((p, idx) => ({
              ...p,
              hand: deck.slice(idx * cardsPerPlayer, (idx + 1) * cardsPerPlayer)
            }));

            const gameData = {
              players: updatedPlayers,
              currentTurn: updatedPlayers[0].id,
              gameLog: ['Game started!'],
              teams,
              scores: { team1: 0, team2: 0 },
              started: true
            };

            localStorage.setItem(`game:${roomCode}`, JSON.stringify(gameData));
            setGameState('playing');
            loadGame();
          };

          const getAskableCards = () => {
            if (!myHand.length) return [];
            const askable = [];
            myHand.forEach(card => {
              const set = SETS.find(s => s.cards.includes(card));
              if (set) {
                set.cards.forEach(c => {
                  if (!myHand.includes(c) && !askable.includes(c)) {
                    askable.push(c);
                  }
                });
              }
            });
            return askable;
          };

          const askForCard = () => {
            if (!selectedOpponent || !selectedCard) return alert('Select opponent and card!');
            try {
              const game = localStorage.getItem(`game:${roomCode}`);
              const data = JSON.parse(game);
              const opponent = data.players.find(p => p.id === selectedOpponent);
              const me = data.players.find(p => p.id === myId);
              const hasCard = opponent.hand.includes(selectedCard);
              
              if (hasCard) {
                opponent.hand = opponent.hand.filter(c => c !== selectedCard);
                me.hand.push(selectedCard);
                data.gameLog.unshift(`${playerName} asked ${opponent.name} for ${selectedCard} - SUCCESS!`);
              } else {
                const opponentTeam = data.teams.team1.includes(opponent.id) ? 'team1' : 'team2';
                data.currentTurn = data.teams[opponentTeam][0];
                data.gameLog.unshift(`${playerName} asked ${opponent.name} for ${selectedCard} - FAILED.`);
              }
              
              localStorage.setItem(`game:${roomCode}`, JSON.stringify(data));
              setSelectedCard('');
              setSelectedOpponent('');
              loadGame();
            } catch (e) {
              alert('Error making move');
            }
          };

          const submitCall = () => {
            const set = SETS[callSetIndex];
            if (Object.values(callCards).length !== set.cards.length) {
              return alert('Must assign all cards!');
            }

            try {
              const game = localStorage.getItem(`game:${roomCode}`);
              const data = JSON.parse(game);
              let correct = true;
              const actualLocations = {};
              
              set.cards.forEach(card => {
                const holder = data.players.find(p => p.hand.includes(card));
                if (holder) actualLocations[card] = holder.id;
              });
              
              set.cards.forEach(card => {
                if (callCards[card] !== actualLocations[card]) correct = false;
              });
              
              const myTeam = data.teams.team1.includes(myId) ? 'team1' : 'team2';
              const opponentTeam = myTeam === 'team1' ? 'team2' : 'team1';
              
              if (correct) {
                data.scores[myTeam]++;
                data.gameLog.unshift(`${playerName} correctly called ${set.name}!`);
              } else {
                data.scores[opponentTeam]++;
                data.gameLog.unshift(`${playerName} INCORRECTLY called ${set.name}!`);
              }
              
              set.cards.forEach(card => {
                data.players.forEach(p => {
                  p.hand = p.hand.filter(c => c !== card);
                });
              });
              
              localStorage.setItem(`game:${roomCode}`, JSON.stringify(data));
              setShowCallModal(false);
              loadGame();
              
              if (data.scores.team1 + data.scores.team2 === 9) {
                setTimeout(() => {
                  alert(`Game Over! ${data.scores.team1 > data.scores.team2 ? 'Team 1' : 'Team 2'} wins!`);
                }, 100);
              }
            } catch (e) {
              alert('Error submitting call');
            }
          };

          const myTeam = teams.team1.includes(myId) ? 'team1' : 'team2';
          const isMyTurn = currentTurn === myId;

          // HOME VIEW
          if (view === 'home') {
            return (
              <div className="min-h-screen bg-gradient-to-br from-green-700 via-green-800 to-green-900">
                <div className="container mx-auto px-4 py-16">
                  <div className="text-center mb-16">
                    <div className="flex justify-center mb-6"><Trophy /></div>
                    <h1 className="text-6xl font-bold text-white mb-4">Literature</h1>
                    <p className="text-2xl text-green-100">The Strategic Card Game</p>
                  </div>

                  <div className="max-w-4xl mx-auto bg-white rounded-3xl shadow-2xl p-8 mb-8">
                    <div className="grid md:grid-cols-2 gap-8 mb-8">
                      <button onClick={() => setView('play')} className="bg-gradient-to-br from-green-600 to-green-700 text-white py-8 rounded-2xl font-bold text-2xl hover:from-green-700 hover:to-green-800 transform hover:scale-105 transition-all shadow-lg">
                        Play Now
                      </button>
                      <button onClick={() => setView('rules')} className="bg-gradient-to-br from-blue-600 to-blue-700 text-white py-8 rounded-2xl font-bold text-2xl hover:from-blue-700 hover:to-blue-800 transform hover:scale-105 transition-all shadow-lg">
                        <div className="flex justify-center mb-3"><Book /></div>
                        How to Play
                      </button>
                    </div>

                    <div className="bg-green-50 rounded-xl p-6">
                      <h3 className="font-bold text-xl mb-3">Quick Overview</h3>
                      <ul className="space-y-2 text-gray-700">
                        <li>‚úì 2 teams compete to collect sets of 6 cards</li>
                        <li>‚úì Ask opponents for specific cards</li>
                        <li>‚úì Call complete sets to score</li>
                        <li>‚úì First team to 5 sets wins!</li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            );
          }

          // RULES VIEW
          if (view === 'rules') {
            return (
              <div className="min-h-screen bg-gradient-to-br from-blue-700 via-blue-800 to-blue-900 p-4">
                <div className="max-w-4xl mx-auto">
                  <button onClick={() => setView('home')} className="bg-white text-blue-700 px-6 py-3 rounded-lg font-semibold mb-6 hover:bg-blue-50">
                    ‚Üê Back
                  </button>

                  <div className="bg-white rounded-3xl shadow-2xl p-8">
                    <h1 className="text-4xl font-bold mb-6 text-center">How to Play Literature</h1>

                    <div className="space-y-6">
                      <section>
                        <h2 className="text-2xl font-bold mb-3 text-blue-700">Setup</h2>
                        <p className="mb-2">54 cards: standard deck + 2 jokers</p>
                        <ul className="list-disc list-inside space-y-1 text-gray-700">
                          <li>2 teams of 2-4 players each</li>
                          <li>All cards dealt to players</li>
                          <li><strong>No communication allowed</strong></li>
                        </ul>
                      </section>

                      <section>
                        <h2 className="text-2xl font-bold mb-3 text-blue-700">The 9 Sets</h2>
                        <div className="grid md:grid-cols-2 gap-3">
                          {SETS.map((set, i) => (
                            <div key={i} className="bg-gray-50 p-3 rounded-lg">
                              <div className="font-semibold mb-1">{set.name}</div>
                              <div className="text-sm text-gray-600">{set.cards.join(', ')}</div>
                            </div>
                          ))}
                        </div>
                      </section>

                      <section>
                        <h2 className="text-2xl font-bold mb-3 text-blue-700">How Turns Work</h2>
                        <div className="space-y-3">
                          <div className="bg-green-50 p-4 rounded-lg">
                            <h3 className="font-bold mb-2">On Your Turn:</h3>
                            <p>Ask one opponent for one card. You can only ask for cards from sets where your team has at least one card.</p>
                          </div>
                          <div className="bg-blue-50 p-4 rounded-lg">
                            <h3 className="font-bold mb-2">If They Have It:</h3>
                            <p>You get the card and go again!</p>
                          </div>
                          <div className="bg-red-50 p-4 rounded-lg">
                            <h3 className="font-bold mb-2">If They Don't:</h3>
                            <p>Turn passes to their team</p>
                          </div>
                        </div>
                      </section>

                      <section>
                        <h2 className="text-2xl font-bold mb-3 text-blue-700">Calling a Set</h2>
                        <div className="bg-yellow-50 border-2 border-yellow-400 p-4 rounded-lg">
                          <p className="font-bold mb-2">‚ö†Ô∏è High Risk, High Reward:</p>
                          <p className="mb-1">‚úÖ Correct: Your team scores 1 point</p>
                          <p>‚ùå Wrong: Other team gets the set!</p>
                        </div>
                      </section>

                      <section className="bg-gray-50 p-6 rounded-xl">
                        <h2 className="text-2xl font-bold mb-3">Strategy Tips</h2>
                        <ul className="space-y-2 text-gray-700">
                          <li>üìù Track who asks for what</li>
                          <li>üß† Deduce card locations</li>
                          <li>‚ö° Time your calls carefully</li>
                          <li>üéØ 8s + Jokers are hardest to track</li>
                        </ul>
                      </section>
                    </div>

                    <button onClick={() => setView('play')} className="w-full mt-8 bg-gradient-to-r from-green-600 to-green-700 text-white py-4 rounded-xl font-bold text-xl">
                      Ready to Play!
                    </button>
                  </div>
                </div>
              </div>
            );
          }

          // TEAM SELECT
          if (showTeamSelect) {
            return (
              <div className="min-h-screen bg-gradient-to-br from-green-700 to-green-900 flex items-center justify-center p-4">
                <div className="bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full">
                  <h2 className="text-2xl font-bold text-center mb-6">Choose Your Team</h2>
                  
                  <div className="space-y-4">
                    <button onClick={() => setSelectedTeam('team1')} className={`w-full p-6 rounded-lg border-4 transition-all ${selectedTeam === 'team1' ? 'border-blue-600 bg-blue-50' : 'border-gray-300 bg-white hover:border-blue-400'}`}>
                      <div className="text-2xl font-bold text-blue-600 mb-2">Team 1</div>
                      <div className="text-sm text-gray-600">Blue Team</div>
                    </button>
                    
                    <button onClick={() => setSelectedTeam('team2')} className={`w-full p-6 rounded-lg border-4 transition-all ${selectedTeam === 'team2' ? 'border-red-600 bg-red-50' : 'border-gray-300 bg-white hover:border-red-400'}`}>
                      <div className="text-2xl font-bold text-red-600 mb-2">Team 2</div>
                      <div className="text-sm text-gray-600">Red Team</div>
                    </button>
                  </div>
                  
                  <button onClick={gameState === 'lobby' ? confirmTeamAndCreate : confirmTeamAndJoin} disabled={!selectedTeam} className="w-full mt-6 bg-green-600 text-white py-3 rounded-lg font-semibold hover:bg-green-700 disabled:bg-gray-300">
                    Confirm Team
                  </button>
                  
                  <button onClick={() => { setShowTeamSelect(false); setSelectedTeam(''); setRoomCode(''); setMyId(''); setView('home'); }} className="w-full mt-2 bg-gray-300 text-gray-700 py-2 rounded-lg font-semibold hover:bg-gray-400">
                    Cancel
                  </button>
                </div>
              </div>
            );
          }

          // LOBBY
          if (gameState === 'lobby') {
            return (
              <div className="min-h-screen bg-gradient-to-br from-green-700 to-green-900 flex items-center justify-center p-4">
                <div className="bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full">
                  <button onClick={() => setView('home')} className="mb-4 text-gray-600 hover:text-gray-800">‚Üê Back</button>
                  
                  <div className="text-center mb-8">
                    <h1 className="text-3xl font-bold text-gray-800 mb-2">Literature</h1>
                    <p className="text-gray-600">9 Set Variant</p>
                  </div>
                  
                  <input type="text" placeholder="Your Name" value={playerName} onChange={(e) => setPlayerName(e.target.value)} className="w-full px-4 py-3 border-2 border-gray-300 rounded-lg mb-4 focus:outline-none focus:border-green-600" />
                  
                  <button onClick={createRoom} disabled={!playerName} className="w-full bg-green-600 text-white py-3 rounded-lg font-semibold hover:bg-green-700 disabled:bg-gray-300 mb-4">
                    Create New Game
                  </button>
                  
                  <div className="relative my-6">
                    <div className="absolute inset-0 flex items-center">
                      <div className="w-full border-t border-gray-300"></div>
                    </div>
                    <div className="relative flex justify-center text-sm">
                      <span className="px-2 bg-white text-gray-500">or</span>
                    </div>
                  </div>
                  
                  <input type="text" placeholder="Room Code" value={roomCode} onChange={(e) => setRoomCode(e.target.value.toUpperCase())} className="w-full px-4 py-3 border-2 border-gray-300 rounded-lg mb-4 focus:outline-none focus:border-green-600" />
                  
                  <button onClick={joinRoom} disabled={!playerName || !roomCode} className="w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 disabled:bg-gray-300">
                    Join Game
                  </button>
                </div>
              </div>
            );
          }

          // WAITING ROOM
          if (gameState === 'waiting') {
            return (
              <div className="min-h-screen bg-gradient-to-br from-green-700 to-green-900 flex items-center justify-center p-4">
                <div className="bg-white rounded-2xl shadow-2xl p-8 max-w-2xl w-full">
                  <div className="text-center mb-6">
                    <h2 className="text-2xl font-bold mb-2">Room Code</h2>
                    <div className="flex items-center justify-center gap-2">
                      <span className="text-4xl font-mono font-bold text-green-600">{roomCode}</span>
                      <button onClick={() => { navigator.clipboard.writeText(roomCode); setCopied(true); setTimeout(() => setCopied(false), 2000); }} className="p-2 hover:bg-gray-100 rounded-lg">
                        {copied ? '‚úì' : 'üìã'}
                      </button>
                    </div>
                  </div>
                  
                  <div className="grid md:grid-cols-2 gap-6 mb-6">
                    <div>
                      <h3 className="font-bold text-lg mb-3 text-blue-600">Team 1 ({teams.team1.length})</h3>
                      {players.filter(p => teams.team1.includes(p.id)).map(p => (
                        <div key={p.id} className="bg-blue-50 px-4 py-2 rounded-lg mb-2">
                          {p.name} {p.id === myId && '(You)'}
                        </div>
                      ))}
                    </div>
                    
                    <div>
                      <h3 className="font-bold text-lg mb-3 text-red-600">Team 2 ({teams.team2.length})</h3>
                      {players.filter(p => teams.team2.includes(p.id)).map(p => (
                        <div key={p.id} className="bg-red-50 px-4 py-2 rounded-lg mb-2">
                          {p.name} {p.id === myId && '(You)'}
                        </div>
                      ))}
                    </div>
                  </div>
                  
                  <button onClick={startGame} disabled={players.length < 4 || teams.team1.length === 0 || teams.team2.length === 0} className="w-full bg-green-600 text-white py-3 rounded-lg font-semibold hover:bg-green-700 disabled:bg-gray-300">
                    {players.length < 4 ? `Waiting for ${4 - players.length} more...` : 'Start Game'}
                  </button>
                </div>
              </div>
            );
          }

          // PLAYING
          return (
            <div className="min-h-screen bg-gradient-to-br from-green-700 to-green-900 p-4">
              <div className="max-w-7xl mx-auto">
                <div className="bg-white rounded-2xl shadow-2xl p-6 mb-4">
                  <div className="flex justify-between items-center mb-4">
                    <h1 className="text-2xl font-bold">Room {roomCode}</h1>
                    <div className="text-sm text-gray-600">Auto-refresh: 2s</div>
                  </div>
                  
                  <div className="grid md:grid-cols-3 gap-4 mb-4">
                    <div className="bg-blue-50 p-4 rounded-lg">
                      <h3 className="font-bold text-blue-600 mb-2">Team 1: {scores.team1}</h3>
                      {players.filter(p => teams.team1.includes(p.id)).map(p => (
                        <div key={p.id} className="text-sm mb-1">
                          {currentTurn === p.id && 'üëë '}
                          {p.name} {p.id === myId && '(You)'}
                        </div>
                      ))}
                    </div>
                    
                    <div className="bg-red-50 p-4 rounded-lg">
                      <h3 className="font-bold text-red-600 mb-2">Team 2: {scores.team2}</h3>
                      {players.filter(p => teams.team2.includes(p.id)).map(p => (
                        <div key={p.id} className="text-sm mb-1">
                          {currentTurn === p.id && 'üëë '}
                          {p.name} {p.id === myId && '(You)'}
                        </div>
                      ))}
                    </div>
                    
                    <div className="bg-gray-50 p-4 rounded-lg">
                      <h3 className="font-bold mb-2">Game Log</h3>
                      <div className="text-sm max-h-24 overflow-y-auto">
                        {gameLog.slice(0, 5).map((log, i) => (
                          <div key={i} className="mb-1">{log}</div>
                        ))}
                      </div>
                    </div>
                  </div>
                </div>
                
                <div className="grid md:grid-cols-2 gap-4">
                  <div className="bg-white rounded-2xl shadow-2xl p-6">
                    <h2 className="text-xl font-bold mb-4">Your Hand ({myHand.length} cards)</h2>
                    <div className="flex flex-wrap gap-2 mb-6">
                      {myHand.sort().map((card, i) => (
                        <div key={i} className="bg-gradient-to-br from-gray-50 to-gray-100 border-2 border-gray-300 rounded-lg px-4 py-3 font-bold text-lg shadow-sm">
                          {card}
                        </div>
                      ))}
                    </div>
                    
                    {isMyTurn && (
                      <div className="space-y-4">
                        <div>
                          <label className="block font-semibold mb-2">Select Opponent:</label>
                          <select value={selectedOpponent} onChange={(e) => setSelectedOpponent(e.target.value)} className="w-full px-4 py-2 border-2 border-gray-300 rounded-lg">
                            <option value="">Choose opponent...</option>
                            {players.filter(p => p.id !== myId && teams[myTeam === 'team1' ? 'team2' : 'team1'].includes(p.id)).map(p => (
                              <option key={p.id} value={p.id}>{p.name}</option>
                            ))}
                          </select>
                        </div>
                        
                        <div>
                          <label className="block font-semibold mb-2">Ask for Card:</label>
                          <select value={selectedCard} onChange={(e) => setSelectedCard(e.target.value)} className="w-full px-4 py-2 border-2 border-gray-300 rounded-lg">
                            <option value="">Choose card...</option>
                            {getAskableCards().sort().map(card => (
                              <option key={card} value={card}>{card}</option>
                            ))}
                          </select>
                        </div>
                        
                        <button onClick={askForCard} disabled={!selectedOpponent || !selectedCard} className="w-full bg-green-600 text-white py-3 rounded-lg font-semibold hover:bg-green-700 disabled:bg-gray-300">
                          Ask for Card
                        </button>
                        
                        <button onClick={() => { setShowCallModal(true); setCallCards({}); }} className="w-full bg-yellow-600 text-white py-3 rounded-lg font-semibold hover:bg-yellow-700">
                          Call a Set
                        </button>
                      </div>
                    )}
                    
                    {!isMyTurn && (
                      <div className="bg-gray-100 p-4 rounded-lg text-center">
                        <p className="font-semibold">Waiting for other players...</p>
                      </div>
                    )}
                  </div>
                  
                  <div className="bg-white rounded-2xl shadow-2xl p-6">
                    <h2 className="text-xl font-bold mb-4">Sets Status</h2>
                    <div className="space-y-3">
                      {SETS.map((set, i) => (
                        <div key={i} className="border-2 border-gray-200 rounded-lg p-3">
                          <div className="font-semibold mb-1">{set.name}</div>
                          <div className="flex flex-wrap gap-1 text-sm">
                            {set.cards.map(card => (
                              <span key={card} className="bg-gray-100 px-2 py-1 rounded">{card}</span>
                            ))}
                          </div>
                        </div>
                      ))}
                    </div>
                  </div>
                </div>
              </div>
              
              {showCallModal && (
                <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
                  <div className="bg-white rounded-2xl shadow-2xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto">
                    <h2 className="text-2xl font-bold mb-4">Call a Set</h2>
                    
                    <div className="mb-4">
                      <label className="block font-semibold mb-2">Select Set:</label>
                      <select value={callSetIndex} onChange={(e) => { setCallSetIndex(Number(e.target.value)); setCallCards({}); }} className="w-full px-4 py-2 border-2 border-gray-300 rounded-lg">
                        {SETS.map((set, i) => (
                          <option key={i} value={i}>{set.name}</option>
                        ))}
                      </select>
                    </div>
                    
                    <div className="space-y-3 mb-4">
                      {SETS[callSetIndex].cards.map(card => (
                        <div key={card} className="flex items-center gap-3">
                          <span className="font-bold w-16">{card}</span>
                          <select value={callCards[card] || ''} onChange={(e) => setCallCards({...callCards, [card]: e.target.value})} className="flex-1 px-4 py-2 border-2 border-gray-300 rounded-lg">
                            <option value="">Who has this card?</option>
                            {players.map(p => (
                              <option key={p.id} value={p.id}>{p.name}</option>
                            ))}
                          </select>
                        </div>
                      ))}
                    </div>
                    
                    <div className="flex gap-3">
                      <button onClick={submitCall} className="flex-1 bg-green-600 text-white py-3 rounded-lg font-semibold hover:bg-green-700">
                        Submit Call
                      </button>
                      <button onClick={() => setShowCallModal(false)} className="flex-1 bg-gray-300 text-gray-700 py-3 rounded-lg font-semibold hover:bg-gray-400">
                        Cancel
                      </button>
                    </div>
                  </div>
                </div>
              )}
            </div>
          );
        };

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
